{% extends "base.html" %}
{% load allauth i18n %}
{% block head_title %}
    {% translate "Activate Authenticator App" %}
{% endblock head_title %}
{% block content %}
    <!-- Left Sidebar -->
    {% include 'pages/left_nav.html' %}
    
    <div class="main-content">
        <header class="main-header">
            <h1>{% translate "Activate Authenticator App" %}</h1>
        </header>
        
        <div class="alert alert-info">
            <i class="ri-shield-keyhole-line" style="margin-right: 8px;"></i>
            {% blocktranslate %}To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below.{% endblocktranslate %}
        </div>
        
        {% url 'mfa_activate_totp' as action_url %}
        {% element form form=form method="post" action=action_url %}
            {% slot body %}
                <div style="text-align: center; margin: 30px 0;">
                    {% element img src=totp_svg_data_uri alt=form.secret tags="mfa,totp,qr" %}
                    {% endelement %}
                </div>
                
                {% csrf_token %}
                <div class="form-group">
                    <label for="authenticator_secret">{% translate "Authenticator secret" %}</label>
                    <input type="text" id="authenticator_secret" class="form-control" value="{{ form.secret }}" disabled>
                    <small class="form-text text-muted">
                        {% translate "You can store this secret and use it to reinstall your authenticator app at a later time." %}
                    </small>
                </div>
                
                {% element fields form=form %}
                {% endelement %}
            {% endslot %}
            {% slot actions %}
                <div style="text-align: right; margin-top: 20px;">
                    <button type="submit" class="post-button" style="background-color: #1d1e3a;">
                        <i class="ri-shield-check-line"></i>
                        <span>{% trans "Activate" %}</span>
                    </button>
                </div>
            {% endslot %}
        {% endelement %}
    </div>
    
    <!-- Right Sidebar -->
    {% include 'pages/right_content.html' %}
{% endblock content %} 