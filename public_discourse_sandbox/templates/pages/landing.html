{% extends "base.html" %}

{% load static %}

{% block content %}
<div class="landing-layout">
    <!-- Header -->
    <header class="landing-header">
        <div class="platform-logo">
            <div class="logo-icon">
                <i class="ri-discuss-line"></i>
            </div>
            <div class="platform-name">
                Public Discourse<span class="sandbox">Sandbox</span>
            </div>
        </div>
        <div class="auth-actions">
            {% comment %} <a href="{% url 'login' %}" class="login-btn">Sign in</a>
            <a href="{% url 'signup' %}" class="signup-btn">Sign up</a> {% endcomment %}
            <a href="{% url 'account_login' %}" class="login-btn">Sign in</a>
            <a href="#" class="signup-btn" onclick="openConsentModal(); return false;">Sign up</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="landing-content">
        <section class="hero-section">
            <div class="hero-content">
                <h1>Welcome to the Public Discourse Sandbox</h1>
                <div class="hero-description">
                    <p>*** This platform is actively under development. To test basic functionality, please sign up as a <b>regular user</b>. ***</p>
                </div>
                <div class="cta-buttons">
                    {% comment %} <a href="{% url 'signup' %}" class="cta-btn signup">Create Account</a>
                    <a href="{% url 'login' %}" class="cta-btn login">Sign In</a> {% endcomment %}
                    <a href="#" class="cta-btn signup" onclick="openConsentModal(); return false;">Create Account</a>
                    <a href="{% url 'account_login' %}" class="cta-btn login">Sign In</a>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="about-content">
                <h2>About the Platform</h2>
                <p>Public Discourse Sandbox is a research platform developed by the Center for Research Computing at the University of Notre Dame to study and improve community engagement in social media contexts.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="ri-team-line"></i>
                        <h3>Research Focus</h3>
                        <p>Understanding community interactions in controlled environments.</p>
                    </div>
                    <div class="feature-card">
                        <i class="ri-shield-check-line"></i>
                        <h3>Controlled Environment</h3>
                        <p>A secure platform for academic and social discussions.</p>
                    </div>
                    <div class="feature-card">
                        <i class="ri-discuss-line"></i>
                        <h3>Community Guidelines</h3>
                        <p>Clear rules and ethical standards for participation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="rules-section">
            <h2>Platform Rules</h2>
            <div class="rules-grid">
                <div class="rule-card">
                    <i class="ri-chat-smile-line"></i>
                    <h3>Respectful Communication</h3>
                    <br>
                    <p>Be respectful in all interactions. Voice disagreements constructively.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-error-warning-line"></i>
                    <h3>Content Standards</h3>
                    <br>
                    <p>No profanities, personal attacks, or inappropriate content.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-flag-line"></i>
                    <h3>Report Issues</h3>
                    <br>
                    <p>Report inappropriate content or behavior promptly.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-user-settings-line"></i>
                    <h3>Privacy & Consent</h3>
                    <br>
                    <p>Respect research boundaries and maintain confidentiality.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-spam-2-line"></i>
                    <h3>Content Restrictions</h3>
                    <br>
                    <p>No spam, advertisements, or irrelevant content.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-lock-line"></i>
                    <h3>Information Security</h3>
                    <br>
                    <p>Keep platform access information confidential.</p>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <h2>Join the Research Platform</h2>
            <p>Create an account to participate in this research study.</p>
            <div class="cta-buttons">
                {% comment %} <a href="{% url 'signup' %}" class="cta-btn signup">Create Account</a>
                <a href="{% url 'login' %}" class="cta-btn login">Sign In</a> {% endcomment %}
                <a href="#" class="cta-btn signup" onclick="openConsentModal(); return false;">Create Account</a>
                <a href="{% url 'account_login' %}" class="cta-btn login">Sign In</a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="landing-footer">
        <div class="footer-content">
            <div class="university-info">
                <p>Â© {% now "Y" %} University of Notre Dame. All rights reserved.</p>
            </div>
            <div class="contact-info">
                <h4>Contact Research Team</h4>
                <a href="mailto:sandbox-list@nd.edu">sandbox-list@nd.edu</a>
            </div>
        </div>
    </footer>
</div>

<!-- Consent Modal -->
<div id="consentModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content" style="background-color: #fefefe; margin: 10% auto; padding: 20px; border-radius: 8px; max-width: 600px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0;">Consent for Participation</h3>
            <span onclick="closeConsentModal()" style="cursor: pointer; font-size: 24px;">&times;</span>
        </div>
        <div>
            <p>Thank you for your interest in the Public Discourse Sandbox. Before you create an account, please read and agree to the following consent terms:</p>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; max-height: 300px; overflow-y: auto;">
                <h5>User Consent Form</h5>
                <p class="text-muted mb-3">
                    This study has been approved by the University of Notre Dame IRB.
                </p>
                <p>By creating an account, you agree to participate in a research study focused on community engagement in social media contexts. Your interactions within the platform may be anonymized and analyzed for research purposes.</p>
                <p>You understand that:</p>
                <ul>
                    <li>Your participation is voluntary and you can withdraw at any time</li>
                    <li>Your identity will be kept confidential in any published research</li>
                    <li>You agree to follow all platform rules and guidelines</li>
                    <li>You will respect the privacy and contributions of other participants</li>
                </ul>
            </div>
            
            <div style="margin: 20px 0;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="consentCheckbox" style="margin-right: 10px;" onchange="toggleCreateButton()">
                    <span>I have read, understood, and agree to all platform rules, research consent terms, and mandatory security requirements.</span>
                </label>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button onclick="closeConsentModal()" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 8px 16px; border-radius: 4px; margin-right: 10px; cursor: pointer;">Cancel</button>
                <a id="createProfileBtn" href="{% url 'users:signup_with_profile' %}?experiment=00000" style="background-color: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; opacity: 0.5; pointer-events: none;">Create Profile For Public Discourse</a>
            </div>
        </div>
    </div>
</div>

<script>
    function openConsentModal() {
        document.getElementById('consentModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    function closeConsentModal() {
        document.getElementById('consentModal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    function toggleCreateButton() {
        const checkbox = document.getElementById('consentCheckbox');
        const button = document.getElementById('createProfileBtn');
        
        if (checkbox.checked) {
            button.style.opacity = '1';
            button.style.pointerEvents = 'auto';
        } else {
            button.style.opacity = '0.5';
            button.style.pointerEvents = 'none';
        }
    }
    
    // Close if user clicks outside modal
    window.onclick = function(event) {
        const modal = document.getElementById('consentModal');
        if (event.target == modal) {
            closeConsentModal();
        }
    }
</script>
{% endblock %} 
