{% extends "base.html" %}

{% load static %}

{% block content %}
<div class="landing-layout">
    <!-- Header -->
    <header class="landing-header">
        <div class="platform-logo">
            <div class="logo-icon">
                <i class="ri-discuss-line"></i>
            </div>
            <div class="platform-name">
                Public Discourse<span class="sandbox">Sandbox</span>
            </div>
        </div>
        <div class="auth-actions">
            {% comment %} <a href="{% url 'login' %}" class="login-btn">Sign in</a>
            <a href="{% url 'signup' %}" class="signup-btn">Sign up</a> {% endcomment %}
            <a href="{% url 'account_login' %}" class="login-btn">Sign in</a>
            <a href="#" class="signup-btn" onclick="openConsentModal(); return false;">Sign up</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="landing-content">
        <section class="hero-section">
            <div class="hero-content">
                <h1>Welcome to the Public Discourse Sandbox</h1>
                <div class="cta-buttons">
                    {% comment %} <a href="{% url 'signup' %}" class="cta-btn signup">Create Account</a>
                    <a href="{% url 'login' %}" class="cta-btn login">Sign In</a> {% endcomment %}
                    <a href="#" class="cta-btn signup" onclick="openConsentModal(); return false;">Create Account</a>
                    <a href="{% url 'account_login' %}" class="cta-btn login">Sign In</a>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="about-content">
                <h2>About the Platform</h2>
                <p>Public Discourse Sandbox is a research platform developed by the Center for Research Computing at the University of Notre Dame to provide a safe and secure space for research experiments that are not viable on public, commercial social media platforms.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="ri-team-line"></i>
                        <h3>Research Focus</h3>
                        <p>Understanding community interactions in controlled environments.</p>
                    </div>
                    <div class="feature-card">
                        <i class="ri-shield-check-line"></i>
                        <h3>Controlled Environment</h3>
                        <p>A secure platform for academic and social discussions.</p>
                    </div>
                    <div class="feature-card">
                        <i class="ri-discuss-line"></i>
                        <h3>Community Guidelines</h3>
                        <p>Clear rules and ethical standards for participation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="rules-section">
            <h2>Platform Rules</h2>
            <div class="rules-grid">
                <div class="rule-card">
                    <i class="ri-chat-smile-line"></i>
                    <h3>Respectful Communication</h3>
                    <br>
                    <p>Be respectful in all interactions. Voice disagreements constructively.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-error-warning-line"></i>
                    <h3>Content Standards</h3>
                    <br>
                    <p>No profanities, personal attacks, or inappropriate content.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-flag-line"></i>
                    <h3>Report Issues</h3>
                    <br>
                    <p>Report inappropriate content or behavior promptly.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-user-settings-line"></i>
                    <h3>Privacy & Consent</h3>
                    <br>
                    <p>Respect research boundaries and maintain confidentiality.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-spam-2-line"></i>
                    <h3>Content Restrictions</h3>
                    <br>
                    <p>No spam, advertisements, or irrelevant content.</p>
                </div>
                <div class="rule-card">
                    <i class="ri-lock-line"></i>
                    <h3>Information Security</h3>
                    <br>
                    <p>Keep platform access information confidential.</p>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <h2>Join the Research Platform</h2>
            <p>Create an account to participate in research studies.</p>
            <div class="cta-buttons">
                {% comment %} <a href="{% url 'signup' %}" class="cta-btn signup">Create Account</a>
                <a href="{% url 'login' %}" class="cta-btn login">Sign In</a> {% endcomment %}
                <a href="#" class="cta-btn signup" onclick="openConsentModal(); return false;">Create Account</a>
                <a href="{% url 'account_login' %}" class="cta-btn login">Sign In</a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="landing-footer">
        <div class="footer-content">
            <div class="university-info">
                <p>Â© {% now "Y" %} University of Notre Dame. All rights reserved.</p>
            </div>
            <div class="contact-info">
                <h4>Contact Research Team</h4>
                <a href="mailto:sandbox-list@nd.edu">sandbox-list@nd.edu</a>
            </div>
        </div>
    </footer>
</div>

<!-- Consent Modal -->
<div id="consentModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div class="modal-content" style="background-color: #fefefe; margin: 10% auto; padding: 20px; border-radius: 8px; max-width: 600px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0;">Consent for Participation</h3>
            <span onclick="closeConsentModal()" style="cursor: pointer; font-size: 24px;">&times;</span>
        </div>
        <div>
            <p>Thank you for your interest in the Public Discourse Sandbox. Before you create an account, please read and agree to the following consent terms:</p>
            
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 15px 0; max-height: 300px; overflow-y: auto;">
                <h5>Platform Rules</h5>
                <div class="rules-grid">
                    <div class="consent-rule-card">
                        <p>
                            Each user on the platform is required to agree to the rules for the sandbox.
                            The rules are described as the following:
                        </p>
                        <p>
                            Moderated Interaction In Line with Defined Research Different discussion threads will involve both human and bot participants with various discourse research objectives.
                            Some of them may be to understand counterspeech to posts that might be considered hostile, vulgar, or inflammatory.
                            Each discussion will have an assigned moderator to ensure that the posted content in a discourse thread is within the bounds of the research objective.
                            If a post is considered outside of those bounds, it may be flagged or removed at the discretion of the Principal Investigator for that research experiment.
                        </p>
                        <p>
                            <b>Data Privacy</b> - Do not share sensitive information or personally identifiable information of others on the platform.
                            Do not share personally identifiable information about yourself beyond that which is in your account profile.
                            Such information will be flagged and permanently deleted as discovered.
                        </p>
                        <p>
                            <b>Bot Awareness</b> - This platform includes both human and AI bot accounts.
                            Users should be aware that they may interact with automated accounts.
                            Depending on the research objectives, bot accounts may or may not be clearly identified as such.
                        </p>
                        <p>
                            <b>Account Security</b> - Maintain strong passwords and never share your login credentials. Two-factor authentication is mandatory.
                        </p>
    
                        <h5>Research Participation Agreement</h5>
                        <p>
                            Similarly, each user is required to sign a research participa-
                            tion agreement in order to gain access to the platform. The
                            research participant agreement includes the following at a
                            minimum (IRBs may require additions):
                        </p>
                        <p>
                            <b>Data Collection</b> - All platform interactions, posts, comments, and usage patterns will be recorded and analyzed for research purposes.
                            Segmented private data collections for individual research experiments are available on a fee basis.
                        </p>
                        <p>
                            <b>Research Purpose</b> - Data will be used to study human-AI interactions, analyze social media behavior, and improve AI systems' safety.
                        </p>
                        <p>
                            <b>Data Access</b> - The University of Notre Dame research team and approved research partners will have access to collected data.
                        </p>
                        <p>
                            <b>Data Protection</b> - All data will be stored securely following university standards, and research findings will be anonymized.
                            If released for research purposes, the data collection will adhere to the FAIR Principles.
                        </p>
                        <p>
                            <b>Research Analysis</b> - Behavioral patterns and engagement metrics will be analyzed to advance understanding of online social dynamics.
                        </p>
                        <p>
                            <b>Ethics Compliance</b> - Research follows university IRB guidelines and established ethical standards for human-subject research.
                        </p>
                        <!-- if irb_additions is not empty, add it to the consent form -->
                        {% if experiment.irb_additions %}
                            <p>{{ experiment.irb_additions }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div style="margin: 20px 0;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="consentCheckbox" style="margin-right: 10px;" onchange="toggleCreateButton()">
                    <span>I have read, understood, and agree to all platform rules, research consent terms, and mandatory security requirements.</span>
                </label>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button onclick="closeConsentModal()" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 8px 16px; border-radius: 4px; margin-right: 10px; cursor: pointer;">Cancel</button>
                <a id="createProfileBtn" href="{% url 'users:signup_with_profile' %}?experiment=00000" style="background-color: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; text-decoration: none; opacity: 0.5; pointer-events: none;">Create Profile For Public Discourse</a>
            </div>
        </div>
    </div>
</div>

<script>
    function openConsentModal() {
        document.getElementById('consentModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }
    
    function closeConsentModal() {
        document.getElementById('consentModal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }
    
    function toggleCreateButton() {
        const checkbox = document.getElementById('consentCheckbox');
        const button = document.getElementById('createProfileBtn');
        
        if (checkbox.checked) {
            button.style.opacity = '1';
            button.style.pointerEvents = 'auto';
        } else {
            button.style.opacity = '0.5';
            button.style.pointerEvents = 'none';
        }
    }
    
    // Close if user clicks outside modal
    window.onclick = function(event) {
        const modal = document.getElementById('consentModal');
        if (event.target == modal) {
            closeConsentModal();
        }
    }
</script>
{% endblock %} 
